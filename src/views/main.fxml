<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx/8"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:id="mainPane"
            prefWidth="950" prefHeight="650"
            stylesheets="@styles/main.css"
            fx:controller="controllers.MainController">

    <fx:define>
        <ToggleGroup fx:id="tabGroup"/>
    </fx:define>

    <padding>
        <Insets top="0" right="0" bottom="0" left="0"/>
    </padding>

    <top>
        <VBox spacing="10">
            <Region fx:id="topGlow" prefHeight="5" styleClass="top-accent"/>
            <VBox spacing="15" alignment="CENTER">
                <padding>
                    <Insets top="8" right="24" left="24" bottom="15"/>
                </padding>
                <HBox alignment="CENTER" styleClass="header-container" HBox.hgrow="ALWAYS">
                    <padding>
                        <Insets top="15" right="0" bottom="5" left="0"/>
                    </padding>
                    <Label text="GESTORAPP" styleClass="logo-text"/>
                </HBox>
                <HBox spacing="15" styleClass="tab-container" alignment="CENTER">
                    <ToggleButton fx:id="usuariosBtn" text="USUARIOS" selected="true" toggleGroup="$tabGroup" styleClass="tab-button"/>
                    <ToggleButton fx:id="pedidosBtn" text="PEDIDOS" toggleGroup="$tabGroup" styleClass="tab-button"/>
                </HBox>
                <HBox styleClass="action-buttons-container" spacing="10" alignment="CENTER">
                    <padding>
                        <Insets top="15" right="0" bottom="0" left="0"/>
                    </padding>
                    <Button fx:id="insertarBtn" text="NUEVO USUARIO" maxWidth="Infinity" styleClass="action-button" onAction="#handleInsertar"/>
                    <Button fx:id="modificarBtn" text="MODIFICAR" maxWidth="Infinity" styleClass="action-button" onAction="#handleModificar"/>
                    <Button fx:id="borrarBtn" text="BORRAR" maxWidth="Infinity" styleClass="action-button" onAction="#handleBorrar"/>
                    <Button fx:id="csvBtn" text="CSV" maxWidth="Infinity" styleClass="action-button" onAction="#handleExportarCSV"/>
                    <Button fx:id="xmlBtn" text="XML" maxWidth="Infinity" styleClass="action-button" onAction="#handleExportarXML" disable="true"/>
                </HBox>
            </VBox>
        </VBox>
    </top>

    <center>
        <BorderPane>
            <padding>
                <Insets top="0" right="24" bottom="24" left="24"/>
            </padding>
            <center>
                <VBox spacing="15" styleClass="table-container">
                    <padding>
                        <Insets top="10" right="0" bottom="0" left="0"/>
                    </padding>
                    <HBox styleClass="search-bar" alignment="CENTER" VBox.vgrow="NEVER" fillHeight="true">
                        <TextField fx:id="buscarField" promptText="Buscar por ID, nombre, email, producto..." HBox.hgrow="ALWAYS" styleClass="search-field"/>
                        <Button fx:id="buscarBtn" text="🔍" styleClass="search-button" onAction="#handleBuscar"/>
                    </HBox>
                    <TableView fx:id="dataTable" VBox.vgrow="ALWAYS" styleClass="data-table">
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </center>
        </BorderPane>
    </center>
</BorderPane>